<script id="vs0" type="x-shader/x-vertex">
/* VERTEX SHADER */
varying vec3 my_pos;

/* texture coord in THREE.js is "uv" */
varying vec2 my_uv;

void main()
{
    my_pos = position;
    my_uv = uv; /* init from default attrib "uv" */
	
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
</script>
<script id="fs0" type="x-shader/x-fragment">
/* FRAGMENT SHADER */
//precision mediump float;
varying vec3 my_pos;
uniform vec4 color_dark;
uniform sampler2D marb_tex;
varying vec2 my_uv;

void main(){
    if (my_pos.z > 0.0) {
        if (my_pos.x * my_pos.y < 0.0)
           gl_FragColor = color_dark;
        else
           gl_FragColor = vec4 (0.8, 1.0, 0.7, 1.0);
    }else {
        gl_FragColor = texture2D (needle_tex, my_uv);
    }
}
</script>

